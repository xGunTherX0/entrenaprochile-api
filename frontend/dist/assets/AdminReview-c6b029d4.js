import{_ as g,a as d,o as r,c as i,b as t,e as u,F as p,j as m,d as _,t as o}from"./index-34d007ee.js";const x={name:"AdminReview",data(){return{rutinas:[],planes:[],loadingR:!1,loadingP:!1,error:null}},mounted(){this.loadAll()},methods:{async loadAll(){this.error=null,this.loadingR=!0,this.loadingP=!0;try{const a=await d.get("/api/admin/review");if(!a.ok){const n=await a.json().catch(()=>({}));this.error=n.error||"Error cargando elementos pendientes",this.rutinas=[],this.planes=[],this.loadingR=!1,this.loadingP=!1;return}const e=await a.json();this.rutinas=e.rutinas||[],this.planes=e.planes||[]}catch(a){this.error=a.message||String(a),this.rutinas=[],this.planes=[]}finally{this.loadingR=!1,this.loadingP=!1}},async approveRutina(a){if(confirm("Aprobar rutina y publicarla?"))try{const e=await d.post(`/api/admin/review/rutina/${a}/approve`,null);if(!e.ok){const n=await e.json().catch(()=>({}));alert(n.error||"Error aprobando");return}await this.loadAll()}catch(e){alert(e.message||String(e))}},async rejectRutina(a){if(confirm("Rechazar rutina (se eliminará)?"))try{const e=await d.post(`/api/admin/review/rutina/${a}/reject`,null);if(!e.ok){const n=await e.json().catch(()=>({}));alert(n.error||"Error rechazando");return}await this.loadAll()}catch(e){alert(e.message||String(e))}},async approvePlan(a){if(confirm("Aprobar plan y publicarlo?"))try{const e=await d.post(`/api/admin/review/plan/${a}/approve`,null);if(!e.ok){const n=await e.json().catch(()=>({}));alert(n.error||"Error aprobando");return}await this.loadAll()}catch(e){alert(e.message||String(e))}},async rejectPlan(a){if(confirm("Rechazar plan (se eliminará)?"))try{const e=await d.post(`/api/admin/review/plan/${a}/reject`,null);if(!e.ok){const n=await e.json().catch(()=>({}));alert(n.error||"Error rechazando");return}await this.loadAll()}catch(e){alert(e.message||String(e))}}}},v={class:"mb-6"},b={key:0},y={key:1,class:"text-sm text-gray-600"},f={class:"flex justify-between items-start"},w={class:"font-semibold"},k={class:"text-xs text-gray-500"},j={class:"text-sm text-gray-700"},R={class:"text-xs text-gray-500"},A={class:"space-x-2"},C=["onClick"],P=["onClick"],E={key:0},z={key:1,class:"text-sm text-gray-600"},N={class:"flex justify-between items-start"},S={class:"font-semibold"},B={class:"text-xs text-gray-500"},V={class:"text-sm text-gray-700"},F={class:"text-xs text-gray-500"},D={class:"space-x-2"},L=["onClick"],T=["onClick"];function q(a,e,n,G,l,c){return r(),i("div",null,[e[2]||(e[2]=t("h2",{class:"text-xl font-semibold mb-4"},"Revisión de Contenido (Rutinas y Planes)",-1)),t("div",v,[e[0]||(e[0]=t("h3",{class:"font-semibold"},"Rutinas no publicadas",-1)),l.loadingR?(r(),i("div",b,"Cargando...")):u("",!0),!l.loadingR&&l.rutinas.length===0?(r(),i("div",y,"No hay rutinas pendientes.")):u("",!0),(r(!0),i(p,null,m(l.rutinas,s=>(r(),i("div",{key:"r-"+s.id,class:"border p-3 rounded mb-2 bg-white"},[t("div",f,[t("div",null,[t("div",w,[_(o(s.nombre)+" ",1),t("small",k,"(id: "+o(s.id)+")",1)]),t("div",j,o(s.descripcion),1),t("div",R,"Entrenador: "+o(s.entrenador_nombre||s.entrenador_usuario_id)+" — Nivel: "+o(s.nivel),1)]),t("div",A,[t("button",{onClick:h=>c.approveRutina(s.id),class:"px-2 py-1 bg-green-600 text-white rounded text-sm"},"Aprobar",8,C),t("button",{onClick:h=>c.rejectRutina(s.id),class:"px-2 py-1 bg-red-600 text-white rounded text-sm"},"Rechazar",8,P)])])]))),128))]),t("div",null,[e[1]||(e[1]=t("h3",{class:"font-semibold"},"Planes no publicados",-1)),l.loadingP?(r(),i("div",E,"Cargando...")):u("",!0),!l.loadingP&&l.planes.length===0?(r(),i("div",z,"No hay planes pendientes.")):u("",!0),(r(!0),i(p,null,m(l.planes,s=>(r(),i("div",{key:"p-"+s.id,class:"border p-3 rounded mb-2 bg-white"},[t("div",N,[t("div",null,[t("div",S,[_(o(s.nombre)+" ",1),t("small",B,"(id: "+o(s.id)+")",1)]),t("div",V,o(s.descripcion),1),t("div",F,"Entrenador: "+o(s.entrenador_nombre||s.entrenador_usuario_id),1)]),t("div",D,[t("button",{onClick:h=>c.approvePlan(s.id),class:"px-2 py-1 bg-green-600 text-white rounded text-sm"},"Aprobar",8,L),t("button",{onClick:h=>c.rejectPlan(s.id),class:"px-2 py-1 bg-red-600 text-white rounded text-sm"},"Rechazar",8,T)])])]))),128))])])}const I=g(x,[["render",q]]);export{I as default};
